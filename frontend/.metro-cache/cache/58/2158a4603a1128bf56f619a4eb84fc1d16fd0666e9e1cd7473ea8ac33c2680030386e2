{"dependencies":[{"name":"./NitroModules","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":51},"end":{"line":2,"column":45,"index":96}}],"key":"IVfjau5UcgSn94aH5XtFOt6t9SU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getHybridObjectConstructor = getHybridObjectConstructor;\n  var _NitroModules = require(_dependencyMap[0]);\n  var cache = new Map();\n\n  /**\n   * Get a constructor function for the given `HybridObject` {@linkcode T}.\n   * @param name The name of the `HybridObject` under which it was registered at.\n   * @returns A constructor that creates instances of {@linkcode T}\n   * @example\n   * ```ts\n   * export const HybridImage = getHybridObjectConstructor<Image>('Image')\n   *\n   * const image1 = new HybridImage()\n   * const image2 = new HybridImage()\n   * image1 instanceof HybridImage // --> true\n   * ```\n   */\n  function getHybridObjectConstructor(name) {\n    // Cache functions for performance.\n    if (cache.has(name)) {\n      return cache.get(name);\n    }\n\n    // A function that creates the HybridObject.\n    // This can be called with `new`, and internally sets the prototype.\n    var constructorFunc = function () {\n      var instance = _NitroModules.NitroModules.createHybridObject(name);\n      var prototype = Object.getPrototypeOf(instance);\n      if (constructorFunc.prototype !== prototype) {\n        constructorFunc.prototype = prototype;\n        constructorFunc.prototypeInitialized = true;\n      }\n      return instance;\n    };\n\n    // Configure lazy prototype. If `instanceof` is called before a `T`\n    // has been created, we just lazy-create a new `T` instance to set the proto.\n    constructorFunc.prototypeInitialized = false;\n    Object.defineProperty(constructorFunc, Symbol.hasInstance, {\n      value: instance => {\n        if (!constructorFunc.prototypeInitialized) {\n          // User didn't call `new T()` yet, so we don't\n          // know the prototype yet. Just create one temp object to find\n          // out the prototype.\n          var tempInstance = _NitroModules.NitroModules.createHybridObject(name);\n          constructorFunc.prototype = Object.getPrototypeOf(tempInstance);\n          constructorFunc.prototypeInitialized = true;\n        }\n        // Loop through the prototype chain of the value\n        // we're testing for to see if it is a direct instance\n        // of `T`, or a derivative of it.\n        var proto = Object.getPrototypeOf(instance);\n        while (proto != null) {\n          if (proto === constructorFunc.prototype) {\n            return true;\n          }\n          proto = Object.getPrototypeOf(proto);\n        }\n        // No prototype overlap.\n        return false;\n      }\n    });\n    cache.set(name, constructorFunc);\n    return constructorFunc;\n  }\n});","lineCount":72,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"getHybridObjectConstructor"],[7,36,19,0],[7,39,19,0,"getHybridObjectConstructor"],[7,65,19,0],[8,2,2,0],[8,6,2,0,"_NitroModules"],[8,19,2,0],[8,22,2,0,"require"],[8,29,2,0],[8,30,2,0,"_dependencyMap"],[8,44,2,0],[9,2,4,0],[9,6,4,6,"cache"],[9,11,4,11],[9,14,4,14],[9,18,4,18,"Map"],[9,21,4,21],[9,22,4,40],[9,23,4,41],[11,2,6,0],[12,0,7,0],[13,0,8,0],[14,0,9,0],[15,0,10,0],[16,0,11,0],[17,0,12,0],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,0,16,0],[22,0,17,0],[23,0,18,0],[24,2,19,7],[24,11,19,16,"getHybridObjectConstructor"],[24,37,19,42,"getHybridObjectConstructor"],[24,38,20,2,"name"],[24,42,20,14],[24,44,21,17],[25,4,22,2],[26,4,23,2],[26,8,23,6,"cache"],[26,13,23,11],[26,14,23,12,"has"],[26,17,23,15],[26,18,23,16,"name"],[26,22,23,20],[26,23,23,21],[26,25,23,23],[27,6,24,4],[27,13,24,11,"cache"],[27,18,24,16],[27,19,24,17,"get"],[27,22,24,20],[27,23,24,21,"name"],[27,27,24,25],[27,28,24,26],[28,4,25,2],[30,4,27,2],[31,4,28,2],[32,4,29,2],[32,8,29,8,"constructorFunc"],[32,23,29,23],[32,26,29,26],[32,35,29,26,"constructorFunc"],[32,36,29,26],[32,38,29,38],[33,6,30,4],[33,10,30,10,"instance"],[33,18,30,18],[33,21,30,21,"NitroModules"],[33,34,30,33],[33,35,30,33,"NitroModules"],[33,47,30,33],[33,48,30,34,"createHybridObject"],[33,66,30,52],[33,67,30,56,"name"],[33,71,30,60],[33,72,30,61],[34,6,31,4],[34,10,31,10,"prototype"],[34,19,31,19],[34,22,31,22,"Object"],[34,28,31,28],[34,29,31,29,"getPrototypeOf"],[34,43,31,43],[34,44,31,44,"instance"],[34,52,31,52],[34,53,31,53],[35,6,32,4],[35,10,32,8,"constructorFunc"],[35,25,32,23],[35,26,32,24,"prototype"],[35,35,32,33],[35,40,32,38,"prototype"],[35,49,32,47],[35,51,32,49],[36,8,33,6,"constructorFunc"],[36,23,33,21],[36,24,33,22,"prototype"],[36,33,33,31],[36,36,33,34,"prototype"],[36,45,33,43],[37,8,34,6,"constructorFunc"],[37,23,34,21],[37,24,34,22,"prototypeInitialized"],[37,44,34,42],[37,47,34,45],[37,51,34,49],[38,6,35,4],[39,6,36,4],[39,13,36,11,"instance"],[39,21,36,19],[40,4,37,2],[40,5,37,68],[42,4,39,2],[43,4,40,2],[44,4,41,2,"constructorFunc"],[44,19,41,17],[44,20,41,18,"prototypeInitialized"],[44,40,41,38],[44,43,41,41],[44,48,41,46],[45,4,42,2,"Object"],[45,10,42,8],[45,11,42,9,"defineProperty"],[45,25,42,23],[45,26,42,24,"constructorFunc"],[45,41,42,39],[45,43,42,41,"Symbol"],[45,49,42,47],[45,50,42,48,"hasInstance"],[45,61,42,59],[45,63,42,61],[46,6,43,4,"value"],[46,11,43,9],[46,13,43,12,"instance"],[46,21,43,29],[46,25,43,34],[47,8,44,6],[47,12,44,10],[47,13,44,11,"constructorFunc"],[47,28,44,26],[47,29,44,27,"prototypeInitialized"],[47,49,44,47],[47,51,44,49],[48,10,45,8],[49,10,46,8],[50,10,47,8],[51,10,48,8],[51,14,48,14,"tempInstance"],[51,26,48,26],[51,29,48,29,"NitroModules"],[51,42,48,41],[51,43,48,41,"NitroModules"],[51,55,48,41],[51,56,48,42,"createHybridObject"],[51,74,48,60],[51,75,48,64,"name"],[51,79,48,68],[51,80,48,69],[52,10,49,8,"constructorFunc"],[52,25,49,23],[52,26,49,24,"prototype"],[52,35,49,33],[52,38,49,36,"Object"],[52,44,49,42],[52,45,49,43,"getPrototypeOf"],[52,59,49,57],[52,60,49,58,"tempInstance"],[52,72,49,70],[52,73,49,71],[53,10,50,8,"constructorFunc"],[53,25,50,23],[53,26,50,24,"prototypeInitialized"],[53,46,50,44],[53,49,50,47],[53,53,50,51],[54,8,51,6],[55,8,52,6],[56,8,53,6],[57,8,54,6],[58,8,55,6],[58,12,55,10,"proto"],[58,17,55,15],[58,20,55,18,"Object"],[58,26,55,24],[58,27,55,25,"getPrototypeOf"],[58,41,55,39],[58,42,55,40,"instance"],[58,50,55,48],[58,51,55,49],[59,8,56,6],[59,15,56,13,"proto"],[59,20,56,18],[59,24,56,22],[59,28,56,26],[59,30,56,28],[60,10,57,8],[60,14,57,12,"proto"],[60,19,57,17],[60,24,57,22,"constructorFunc"],[60,39,57,37],[60,40,57,38,"prototype"],[60,49,57,47],[60,51,57,49],[61,12,58,10],[61,19,58,17],[61,23,58,21],[62,10,59,8],[63,10,60,8,"proto"],[63,15,60,13],[63,18,60,16,"Object"],[63,24,60,22],[63,25,60,23,"getPrototypeOf"],[63,39,60,37],[63,40,60,38,"proto"],[63,45,60,43],[63,46,60,44],[64,8,61,6],[65,8,62,6],[66,8,63,6],[66,15,63,13],[66,20,63,18],[67,6,64,4],[68,4,65,2],[68,5,65,3],[68,6,65,4],[69,4,67,2,"cache"],[69,9,67,7],[69,10,67,8,"set"],[69,13,67,11],[69,14,67,12,"name"],[69,18,67,16],[69,20,67,18,"constructorFunc"],[69,35,67,33],[69,36,67,34],[70,4,68,2],[70,11,68,9,"constructorFunc"],[70,26,68,24],[71,2,69,0],[72,0,69,1],[72,3]],"functionMap":{"names":["<global>","getHybridObjectConstructor","<anonymous>","Object.defineProperty$argument_2.value"],"mappings":"AAA;OCkB;0BCU;GDQ;WEM;KFqB;CDK"},"hasCjsExports":false},"type":"js/module"}]}