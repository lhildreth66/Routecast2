{"dependencies":[{"name":"./entitlements","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":156},"end":{"line":8,"column":51,"index":207}}],"key":"TCV4PVJ9w9IttLvA/oNRiZFzZpQ=","exportNames":["*"],"imports":1}},{"name":"./gateTracking","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":258},"end":{"line":10,"column":75,"index":333}}],"key":"XvTPKS59YlC1Fmn0C+js9f0bgCY=","exportNames":["*"],"imports":1}},{"name":"../utils/analytics","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":334},"end":{"line":11,"column":48,"index":382}}],"key":"z07tysMwqF08Qd5DJrEW4k3RhgQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"PremiumLockedError\",{enumerable:!0,get:function(){return c}}),e.setPaywallTrigger=function(t){u=t},e.premiumGate=async function(t,n){const u=await s(t);if((0,o.trackEvent)('feature_intent_used',{feature:t,isPremium:u}),!u)throw await f(t),new c(t);return await n()},e.isPremiumLockedResponse=l,e.getLockedFeature=w,e.premiumApiCall=async function(t,n){try{const o=await n();if(403===o.status){const n=await o.json().catch(()=>({}));if(l(n)){const o=w(n)||t;throw await f(o),new c(o)}}if(o.ok){const n=await o.json();if(l(n)){const o=w(n)||t;throw await f(o),new c(o)}return n}throw new Error(`API call failed: ${o.status}`)}catch(t){if(t instanceof c)throw t;throw t}};var t=r(d[0]),n=r(d[1]),o=r(d[2]);class c extends Error{constructor(t){super(`Premium feature locked: ${t}`),this.feature=t,this.name='PremiumLockedError'}}let u=null;async function s(n){const o=await t.entitlementsCache.load();return!!o&&t.entitlementsCache.isValid(o)}async function f(t){await(0,n.recordAttempt)(t);const c=await(0,n.getGateMode)(t);(0,o.trackEvent)('feature_locked_shown',{feature:t,entryPoint:'hard'===c?'hard_gate':'soft_gate'}),u?u(t,c):console.warn('[premiumGate] No paywall trigger registered')}function l(t){return!!t&&('premium_locked'===t.error||'premium_locked'===t.detail?.error)}function w(t){return t?.feature?t.feature:t?.detail?.feature?t.detail.feature:null}});","lineCount":1,"map":[[1,90,13,0,"Object"],[1,97,13,0,"defineProperty"],[1,112,13,0,"e"],[1,114,13,0],[1,136,13,0,"enumerable"],[1,148,13,0],[1,150,13,0,"get"],[1,154,13,0],[1,172,13,0,"PremiumLockedError"],[1,173,13,0],[1,177,26,0,"e"],[1,179,26,0,"setPaywallTrigger"],[1,197,26,7],[1,206,26,34,"trigger"],[1,209,27,2,"paywallTrigger"],[1,211,27,19,"trigger"],[1,212,28,0],[1,214,75,0,"e"],[1,216,75,0,"premiumGate"],[1,228,75,7,"async"],[1,243,76,2,"feature"],[1,245,77,2,"fn"],[1,248,79,2],[1,254,79,8,"entitled"],[1,262,79,25,"checkEntitlement"],[1,264,79,42,"feature"],[1,267,87,2],[1,271,82,2],[1,273,82,2,"trackEvent"],[1,275,82,12,"trackEvent"],[1,287,82,13],[1,309,82,36],[1,310,83,4,"feature"],[1,320,84,4,"isPremium"],[1,330,84,15,"entitled"],[1,335,87,7,"entitled"],[1,337,89,4],[1,349,88,10,"triggerPaywall"],[1,351,88,25,"feature"],[1,354,89,10],[1,358,89,14,"PremiumLockedError"],[1,360,89,33,"feature"],[1,363,92,2],[1,376,92,15,"fn"],[1,379,93,0],[1,381,98,0,"e"],[1,383,98,0,"isPremiumLockedResponse"],[1,409,119,0,"e"],[1,411,119,0,"getLockedFeature"],[1,430,140,0,"e"],[1,432,140,0,"premiumApiCall"],[1,447,140,7,"async"],[1,462,141,2,"feature"],[1,464,142,2,"apiFn"],[1,467,144,2],[1,471,145,4],[1,477,145,10,"response"],[1,485,145,27,"apiFn"],[1,489,148,4],[1,492,148,28],[1,498,148,8,"response"],[1,500,148,17,"status"],[1,507,148,33],[1,508,149,6],[1,514,149,12,"body"],[1,522,149,25,"response"],[1,524,149,34,"json"],[1,531,149,41,"catch"],[1,537,149,47],[1,543,149,56],[1,547,151,6],[1,550,151,10,"isPremiumLockedResponse"],[1,552,151,34,"body"],[1,555,151,41],[1,556,152,8],[1,562,152,14,"lockedFeature"],[1,564,152,30,"getLockedFeature"],[1,566,152,47,"body"],[1,570,152,56,"feature"],[1,572,154,8],[1,584,153,14,"triggerPaywall"],[1,586,153,29,"lockedFeature"],[1,589,154,14],[1,593,154,18,"PremiumLockedError"],[1,595,154,37,"lockedFeature"],[1,597,155,6],[1,598,156,4],[1,599,159,4],[1,602,159,8,"response"],[1,604,159,17,"ok"],[1,607,159,21],[1,608,160,6],[1,614,160,12,"body"],[1,622,160,25,"response"],[1,624,160,34,"json"],[1,631,162,6],[1,634,162,10,"isPremiumLockedResponse"],[1,636,162,34,"body"],[1,639,162,41],[1,640,163,8],[1,646,163,14,"lockedFeature"],[1,648,163,30,"getLockedFeature"],[1,650,163,47,"body"],[1,654,163,56,"feature"],[1,656,165,8],[1,668,164,14,"triggerPaywall"],[1,670,164,29,"lockedFeature"],[1,673,165,14],[1,677,165,18,"PremiumLockedError"],[1,679,165,37,"lockedFeature"],[1,681,166,6],[1,682,168,6],[1,689,168,13,"body"],[1,690,169,4],[1,691,172,4],[1,697,172,10],[1,701,172,14,"Error"],[1,707,172,20],[1,727,172,40,"response"],[1,729,172,49,"status"],[1,738,173,2],[1,739,173,4],[1,745,173,11,"error"],[1,748,174,4],[1,751,174,8,"error"],[1,764,174,25,"PremiumLockedError"],[1,766,175,6],[1,772,175,12,"error"],[1,774,179,4],[1,780,179,10,"error"],[1,781,180,2],[1,782,181,0],[1,784,8,0],[1,788,8,0,"_entitlements"],[1,790,8,0,"r"],[1,792,8,0,"d"],[1,794,8,0],[1,798,10,0,"_gateTracking"],[1,800,10,0,"r"],[1,802,10,0,"d"],[1,804,10,0],[1,808,11,0,"_utilsAnalytics"],[1,810,11,0,"r"],[1,812,11,0,"d"],[1,814,11,0],[1,818,13,7],[1,824,13,13,"PremiumLockedError"],[1,834,13,40,"Error"],[1,840,14,2,"constructor"],[1,852,14,21,"feature"],[1,855,15,4,"super"],[1,861,15,10],[1,888,15,37,"feature"],[1,893,15,48,"this"],[1,898,14,21,"feature"],[1,908,16,4,"this"],[1,913,16,9,"name"],[1,918,16,16],[1,938,17,2],[1,940,24,0],[1,944,24,4,"paywallTrigger"],[1,946,24,85],[1,951,33,0,"async"],[1,966,33,15,"checkEntitlement"],[1,968,33,32,"feature"],[1,971,34,2],[1,977,34,8,"cached"],[1,985,34,23,"entitlementsCache"],[1,987,34,40,"entitlementsCache"],[1,1005,34,41,"load"],[1,1012,36,2],[1,1020,36,7,"cached"],[1,1023,40,9,"entitlementsCache"],[1,1025,40,26,"entitlementsCache"],[1,1043,40,27,"isValid"],[1,1051,40,35,"cached"],[1,1053,41,0],[1,1054,46,0,"async"],[1,1069,46,15,"triggerPaywall"],[1,1071,46,30,"feature"],[1,1080,48,8],[1,1082,48,8,"recordAttempt"],[1,1084,48,21,"recordAttempt"],[1,1099,48,22,"feature"],[1,1102,51,2],[1,1108,51,8,"gateMode"],[1,1116,51,25],[1,1118,51,25,"getGateMode"],[1,1120,51,36,"getGateMode"],[1,1133,51,37,"feature"],[1,1137,54,2],[1,1139,54,2,"trackEvent"],[1,1141,54,12,"trackEvent"],[1,1153,54,13],[1,1176,54,37],[1,1177,55,4,"feature"],[1,1187,56,4,"entryPoint"],[1,1198,56,29],[1,1207,56,16,"gateMode"],[1,1209,56,38],[1,1221,56,52],[1,1235,59,6,"paywallTrigger"],[1,1237,60,4,"paywallTrigger"],[1,1239,60,19,"feature"],[1,1241,60,28,"gateMode"],[1,1244,62,4,"console"],[1,1252,62,12,"warn"],[1,1257,62,17],[1,1303,64,0],[1,1304,98,7],[1,1313,98,16,"isPremiumLockedResponse"],[1,1315,98,40,"response"],[1,1318,99,2],[1,1326,99,7,"response"],[1,1330,104,25],[1,1349,104,6,"response"],[1,1351,104,15,"error"],[1,1358,109,33],[1,1377,109,6,"response"],[1,1379,109,15,"detail"],[1,1387,109,23,"error"],[1,1393,114,0],[1,1394,119,7],[1,1403,119,16,"getLockedFeature"],[1,1405,119,33,"response"],[1,1408,120,2],[1,1415,120,6,"response"],[1,1418,120,16,"feature"],[1,1426,121,11,"response"],[1,1428,121,20,"feature"],[1,1436,124,6,"response"],[1,1439,124,16,"detail"],[1,1447,124,24,"feature"],[1,1455,125,11,"response"],[1,1457,125,20,"detail"],[1,1464,125,27,"feature"],[1,1472,128,9],[1,1476,129,0],[1,1477,181,1],[1,1480]],"functionMap":{"names":["<global>","PremiumLockedError","PremiumLockedError#constructor","setPaywallTrigger","checkEntitlement","triggerPaywall","premiumGate","isPremiumLockedResponse","getLockedFeature","premiumApiCall","response.json._catch$argument_0"],"mappings":"AAA;OCY;ECC;GDG;CDC;OGQ;CHE;AIK;CJQ;AKK;CLkB;OMW;CNkB;OOK;CPgB;OQK;CRU;OSW;+CCS,UD;CTgC"},"hasCjsExports":false},"type":"js/module"}]}