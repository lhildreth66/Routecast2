{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":225},"end":{"line":8,"column":33,"index":258}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":259},"end":{"line":9,"column":69,"index":328}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  /**\n   * useTerrainShade - React Hook for Terrain Shade Estimation\n   *\n   * Custom hook for calling the solar path and shade blocking API endpoints.\n   * Calculates sunlight availability and shade factor for camping locations.\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useTerrainShade\", {\n    enumerable: true,\n    get: function () {\n      return useTerrainShade;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoVirtualEnv = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[3], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[4], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var API_BASE = _expoVirtualEnv.env.EXPO_PUBLIC_API_BASE || 'http://localhost:8000';\n\n  // Type-safe interfaces matching API models\n\n  /**\n   * Hook for terrain shade and solar path estimation\n   *\n   * Usage:\n   * ```typescript\n   * const { estimate, loading, error, result } = useTerrainShade();\n   *\n   * await estimate({\n   *   latitude: 40.7128,\n   *   longitude: -105.1084,\n   *   date: '2024-06-21',\n   *   tree_canopy_pct: 60,\n   *   horizon_obstruction_deg: 15,\n   * });\n   *\n   * if (result?.is_premium_locked) {\n   *   // Show paywall modal\n   * } else if (result?.sun_path_slots) {\n   *   // Display solar path and shade factor\n   * }\n   * ```\n   */\n  var useTerrainShade = () => {\n    _s();\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n    var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n    var _useState5 = (0, _react.useState)(null),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      result = _useState6[0],\n      setResult = _useState6[1];\n    var estimate = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (request) {\n        setLoading(true);\n        setError(null);\n        try {\n          // Retrieve subscription ID from AsyncStorage if not provided\n          var subscriptionId = request.subscription_id;\n          if (!subscriptionId) {\n            try {\n              subscriptionId = yield AsyncStorage.default.getItem('subscription_id');\n            } catch (e) {\n              console.log('Could not retrieve subscription ID from storage');\n            }\n          }\n\n          // Call API endpoint for solar path\n          var response = yield fetch(`${API_BASE}/api/pro/terrain/sun-path`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              ...request,\n              subscription_id: subscriptionId\n            })\n          });\n          if (!response.ok) {\n            // Try to parse error detail from response\n            var errorDetail = `HTTP ${response.status}`;\n            try {\n              var errorData = yield response.json();\n              if (errorData.detail) {\n                errorDetail = errorData.detail;\n              }\n            } catch {\n              // If response isn't JSON, use status message\n              errorDetail = response.statusText || `HTTP ${response.status}`;\n            }\n            throw new Error(errorDetail);\n          }\n          var data = yield response.json();\n\n          // Detect premium-locked response\n          if (data.is_premium_locked && data.premium_message) {\n            setError(data.premium_message);\n            setResult(data);\n            setLoading(false);\n            return data;\n          }\n\n          // Success\n          setResult(data);\n          setLoading(false);\n          return data;\n        } catch (err) {\n          var errorMessage = err instanceof Error ? err.message : 'Unknown error';\n          console.error('Error in useTerrainShade:', errorMessage);\n          setError(errorMessage);\n          setLoading(false);\n          return null;\n        }\n      });\n      return function estimate(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var clearResult = () => {\n      setResult(null);\n      setError(null);\n    };\n    return {\n      estimate,\n      loading,\n      error,\n      result,\n      clearResult\n    };\n  };\n  _s(useTerrainShade, \"0rJtg/E9+fiowe8eKNooMN/xlkg=\");\n});","lineCount":152,"map":[[5,2,1,0],[6,0,2,0],[7,0,3,0],[8,0,4,0],[9,0,5,0],[10,0,6,0],[11,2,1,0,"Object"],[11,8,1,0],[11,9,1,0,"defineProperty"],[11,23,1,0],[11,24,1,0,"exports"],[11,31,1,0],[12,4,1,0,"value"],[12,9,1,0],[13,2,1,0],[14,2,1,0],[14,11,1,0,"_interopDefault"],[14,27,1,0,"e"],[14,28,1,0],[15,4,1,0],[15,11,1,0,"e"],[15,12,1,0],[15,16,1,0,"e"],[15,17,1,0],[15,18,1,0,"__esModule"],[15,28,1,0],[15,31,1,0,"e"],[15,32,1,0],[16,6,1,0,"default"],[16,13,1,0],[16,15,1,0,"e"],[17,4,1,0],[18,2,1,0],[19,2,69,0,"Object"],[19,8,69,0],[19,9,69,0,"defineProperty"],[19,23,69,0],[19,24,69,0,"exports"],[19,31,69,0],[20,4,69,0,"enumerable"],[20,14,69,0],[21,4,69,0,"get"],[21,7,69,0],[21,18,69,0,"get"],[21,19,69,0],[22,6,69,0],[22,13,69,0,"useTerrainShade"],[22,28,69,0],[23,4,69,0],[24,2,69,0],[25,2,153,2],[25,6,153,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,42,153,2],[25,45,153,2,"require"],[25,52,153,2],[25,53,153,2,"_dependencyMap"],[25,67,153,2],[26,2,153,2],[26,6,153,2,"_asyncToGenerator"],[26,23,153,2],[26,26,153,2,"_interopDefault"],[26,41,153,2],[26,42,153,2,"_babelRuntimeHelpersAsyncToGenerator"],[26,78,153,2],[27,2,153,2],[27,6,153,2,"_babelRuntimeHelpersSlicedToArray"],[27,39,153,2],[27,42,153,2,"require"],[27,49,153,2],[27,50,153,2,"_dependencyMap"],[27,64,153,2],[28,2,153,2],[28,6,153,2,"_slicedToArray"],[28,20,153,2],[28,23,153,2,"_interopDefault"],[28,38,153,2],[28,39,153,2,"_babelRuntimeHelpersSlicedToArray"],[28,72,153,2],[29,2,153,2],[29,6,153,2,"_expoVirtualEnv"],[29,21,153,2],[29,24,153,2,"require"],[29,31,153,2],[29,32,153,2,"_dependencyMap"],[29,46,153,2],[30,2,8,0],[30,6,8,0,"_react"],[30,12,8,0],[30,15,8,0,"require"],[30,22,8,0],[30,23,8,0,"_dependencyMap"],[30,37,8,0],[31,2,9,0],[31,6,9,0,"_reactNativeAsyncStorageAsyncStorage"],[31,42,9,0],[31,45,9,0,"require"],[31,52,9,0],[31,53,9,0,"_dependencyMap"],[31,67,9,0],[32,2,9,0],[32,6,9,0,"AsyncStorage"],[32,18,9,0],[32,21,9,0,"_interopDefault"],[32,36,9,0],[32,37,9,0,"_reactNativeAsyncStorageAsyncStorage"],[32,73,9,0],[33,2,11,0],[33,6,11,6,"API_BASE"],[33,14,11,14],[33,17,11,17,"_expoVirtualEnv"],[33,32,11,17],[33,33,11,17,"env"],[33,36,11,17],[33,37,11,17,"EXPO_PUBLIC_API_BASE"],[33,57,11,17],[33,61,11,53],[33,84,11,76],[35,2,13,0],[37,2,47,0],[38,0,48,0],[39,0,49,0],[40,0,50,0],[41,0,51,0],[42,0,52,0],[43,0,53,0],[44,0,54,0],[45,0,55,0],[46,0,56,0],[47,0,57,0],[48,0,58,0],[49,0,59,0],[50,0,60,0],[51,0,61,0],[52,0,62,0],[53,0,63,0],[54,0,64,0],[55,0,65,0],[56,0,66,0],[57,0,67,0],[58,0,68,0],[59,2,69,7],[59,6,69,13,"useTerrainShade"],[59,21,69,28],[59,24,69,31,"useTerrainShade"],[59,25,69,31],[59,30,69,60],[60,4,69,60,"_s"],[60,6,69,60],[61,4,70,2],[61,8,70,2,"_useState"],[61,17,70,2],[61,20,70,32],[61,24,70,32,"useState"],[61,30,70,40],[61,31,70,40,"useState"],[61,39,70,40],[61,41,70,41],[61,46,70,46],[61,47,70,47],[62,6,70,47,"_useState2"],[62,16,70,47],[62,23,70,47,"_slicedToArray"],[62,37,70,47],[62,38,70,47,"default"],[62,45,70,47],[62,47,70,47,"_useState"],[62,56,70,47],[63,6,70,9,"loading"],[63,13,70,16],[63,16,70,16,"_useState2"],[63,26,70,16],[64,6,70,18,"setLoading"],[64,16,70,28],[64,19,70,28,"_useState2"],[64,29,70,28],[65,4,71,2],[65,8,71,2,"_useState3"],[65,18,71,2],[65,21,71,28],[65,25,71,28,"useState"],[65,31,71,36],[65,32,71,36,"useState"],[65,40,71,36],[65,42,71,52],[65,46,71,56],[65,47,71,57],[66,6,71,57,"_useState4"],[66,16,71,57],[66,23,71,57,"_slicedToArray"],[66,37,71,57],[66,38,71,57,"default"],[66,45,71,57],[66,47,71,57,"_useState3"],[66,57,71,57],[67,6,71,9,"error"],[67,11,71,14],[67,14,71,14,"_useState4"],[67,24,71,14],[68,6,71,16,"setError"],[68,14,71,24],[68,17,71,24,"_useState4"],[68,27,71,24],[69,4,72,2],[69,8,72,2,"_useState5"],[69,18,72,2],[69,21,72,30],[69,25,72,30,"useState"],[69,31,72,38],[69,32,72,38,"useState"],[69,40,72,38],[69,42,72,68],[69,46,72,72],[69,47,72,73],[70,6,72,73,"_useState6"],[70,16,72,73],[70,23,72,73,"_slicedToArray"],[70,37,72,73],[70,38,72,73,"default"],[70,45,72,73],[70,47,72,73,"_useState5"],[70,57,72,73],[71,6,72,9,"result"],[71,12,72,15],[71,15,72,15,"_useState6"],[71,25,72,15],[72,6,72,17,"setResult"],[72,15,72,26],[72,18,72,26,"_useState6"],[72,28,72,26],[73,4,74,2],[73,8,74,8,"estimate"],[73,16,74,16],[74,6,74,16],[74,10,74,16,"_ref"],[74,14,74,16],[74,21,74,16,"_asyncToGenerator"],[74,38,74,16],[74,39,74,16,"default"],[74,46,74,16],[74,48,74,19],[74,59,75,4,"request"],[74,66,75,32],[74,68,76,45],[75,8,77,4,"setLoading"],[75,18,77,14],[75,19,77,15],[75,23,77,19],[75,24,77,20],[76,8,78,4,"setError"],[76,16,78,12],[76,17,78,13],[76,21,78,17],[76,22,78,18],[77,8,80,4],[77,12,80,8],[78,10,81,6],[79,10,82,6],[79,14,82,10,"subscriptionId"],[79,28,82,24],[79,31,82,27,"request"],[79,38,82,34],[79,39,82,35,"subscription_id"],[79,54,82,50],[80,10,83,6],[80,14,83,10],[80,15,83,11,"subscriptionId"],[80,29,83,25],[80,31,83,27],[81,12,84,8],[81,16,84,12],[82,14,85,10,"subscriptionId"],[82,28,85,24],[82,37,85,33,"AsyncStorage"],[82,49,85,45],[82,50,85,45,"default"],[82,57,85,45],[82,58,85,46,"getItem"],[82,65,85,53],[82,66,85,54],[82,83,85,71],[82,84,85,72],[83,12,86,8],[83,13,86,9],[83,14,86,10],[83,21,86,17,"e"],[83,22,86,18],[83,24,86,20],[84,14,87,10,"console"],[84,21,87,17],[84,22,87,18,"log"],[84,25,87,21],[84,26,87,22],[84,75,87,71],[84,76,87,72],[85,12,88,8],[86,10,89,6],[88,10,91,6],[89,10,92,6],[89,14,92,12,"response"],[89,22,92,20],[89,31,92,29,"fetch"],[89,36,92,34],[89,37,92,35],[89,40,92,38,"API_BASE"],[89,48,92,46],[89,75,92,73],[89,77,92,75],[90,12,93,8,"method"],[90,18,93,14],[90,20,93,16],[90,26,93,22],[91,12,94,8,"headers"],[91,19,94,15],[91,21,94,17],[92,14,95,10],[92,28,95,24],[92,30,95,26],[93,12,96,8],[93,13,96,9],[94,12,97,8,"body"],[94,16,97,12],[94,18,97,14,"JSON"],[94,22,97,18],[94,23,97,19,"stringify"],[94,32,97,28],[94,33,97,29],[95,14,98,10],[95,17,98,13,"request"],[95,24,98,20],[96,14,99,10,"subscription_id"],[96,29,99,25],[96,31,99,27,"subscriptionId"],[97,12,100,8],[97,13,100,9],[98,10,101,6],[98,11,101,7],[98,12,101,8],[99,10,103,6],[99,14,103,10],[99,15,103,11,"response"],[99,23,103,19],[99,24,103,20,"ok"],[99,26,103,22],[99,28,103,24],[100,12,104,8],[101,12,105,8],[101,16,105,12,"errorDetail"],[101,27,105,23],[101,30,105,26],[101,38,105,34,"response"],[101,46,105,42],[101,47,105,43,"status"],[101,53,105,49],[101,55,105,51],[102,12,106,8],[102,16,106,12],[103,14,107,10],[103,18,107,16,"errorData"],[103,27,107,25],[103,36,107,34,"response"],[103,44,107,42],[103,45,107,43,"json"],[103,49,107,47],[103,50,107,48],[103,51,107,49],[104,14,108,10],[104,18,108,14,"errorData"],[104,27,108,23],[104,28,108,24,"detail"],[104,34,108,30],[104,36,108,32],[105,16,109,12,"errorDetail"],[105,27,109,23],[105,30,109,26,"errorData"],[105,39,109,35],[105,40,109,36,"detail"],[105,46,109,42],[106,14,110,10],[107,12,111,8],[107,13,111,9],[107,14,111,10],[107,20,111,16],[108,14,112,10],[109,14,113,10,"errorDetail"],[109,25,113,21],[109,28,113,24,"response"],[109,36,113,32],[109,37,113,33,"statusText"],[109,47,113,43],[109,51,113,47],[109,59,113,55,"response"],[109,67,113,63],[109,68,113,64,"status"],[109,74,113,70],[109,76,113,72],[110,12,114,8],[111,12,115,8],[111,18,115,14],[111,22,115,18,"Error"],[111,27,115,23],[111,28,115,24,"errorDetail"],[111,39,115,35],[111,40,115,36],[112,10,116,6],[113,10,118,6],[113,14,118,12,"data"],[113,18,118,38],[113,27,118,47,"response"],[113,35,118,55],[113,36,118,56,"json"],[113,40,118,60],[113,41,118,61],[113,42,118,62],[115,10,120,6],[116,10,121,6],[116,14,121,10,"data"],[116,18,121,14],[116,19,121,15,"is_premium_locked"],[116,36,121,32],[116,40,121,36,"data"],[116,44,121,40],[116,45,121,41,"premium_message"],[116,60,121,56],[116,62,121,58],[117,12,122,8,"setError"],[117,20,122,16],[117,21,122,17,"data"],[117,25,122,21],[117,26,122,22,"premium_message"],[117,41,122,37],[117,42,122,38],[118,12,123,8,"setResult"],[118,21,123,17],[118,22,123,18,"data"],[118,26,123,22],[118,27,123,23],[119,12,124,8,"setLoading"],[119,22,124,18],[119,23,124,19],[119,28,124,24],[119,29,124,25],[120,12,125,8],[120,19,125,15,"data"],[120,23,125,19],[121,10,126,6],[123,10,128,6],[124,10,129,6,"setResult"],[124,19,129,15],[124,20,129,16,"data"],[124,24,129,20],[124,25,129,21],[125,10,130,6,"setLoading"],[125,20,130,16],[125,21,130,17],[125,26,130,22],[125,27,130,23],[126,10,131,6],[126,17,131,13,"data"],[126,21,131,17],[127,8,132,4],[127,9,132,5],[127,10,132,6],[127,17,132,13,"err"],[127,20,132,16],[127,22,132,18],[128,10,133,6],[128,14,133,12,"errorMessage"],[128,26,133,24],[128,29,133,27,"err"],[128,32,133,30],[128,44,133,42,"Error"],[128,49,133,47],[128,52,133,50,"err"],[128,55,133,53],[128,56,133,54,"message"],[128,63,133,61],[128,66,133,64],[128,81,133,79],[129,10,134,6,"console"],[129,17,134,13],[129,18,134,14,"error"],[129,23,134,19],[129,24,134,20],[129,51,134,47],[129,53,134,49,"errorMessage"],[129,65,134,61],[129,66,134,62],[130,10,135,6,"setError"],[130,18,135,14],[130,19,135,15,"errorMessage"],[130,31,135,27],[130,32,135,28],[131,10,136,6,"setLoading"],[131,20,136,16],[131,21,136,17],[131,26,136,22],[131,27,136,23],[132,10,137,6],[132,17,137,13],[132,21,137,17],[133,8,138,4],[134,6,139,2],[134,7,139,3],[135,6,139,3],[135,22,74,8,"estimate"],[135,30,74,16,"estimate"],[135,31,74,16,"_x"],[135,33,74,16],[136,8,74,16],[136,15,74,16,"_ref"],[136,19,74,16],[136,20,74,16,"apply"],[136,25,74,16],[136,32,74,16,"arguments"],[136,41,74,16],[137,6,74,16],[138,4,74,16],[138,7,139,3],[139,4,141,2],[139,8,141,8,"clearResult"],[139,19,141,19],[139,22,141,22,"clearResult"],[139,23,141,22],[139,28,141,28],[140,6,142,4,"setResult"],[140,15,142,13],[140,16,142,14],[140,20,142,18],[140,21,142,19],[141,6,143,4,"setError"],[141,14,143,12],[141,15,143,13],[141,19,143,17],[141,20,143,18],[142,4,144,2],[142,5,144,3],[143,4,146,2],[143,11,146,9],[144,6,147,4,"estimate"],[144,14,147,12],[145,6,148,4,"loading"],[145,13,148,11],[146,6,149,4,"error"],[146,11,149,9],[147,6,150,4,"result"],[147,12,150,10],[148,6,151,4,"clearResult"],[149,4,152,2],[149,5,152,3],[150,2,153,0],[150,3,153,1],[151,2,153,2,"_s"],[151,4,153,2],[151,5,69,13,"useTerrainShade"],[151,20,69,28],[152,0,69,28],[152,3]],"functionMap":{"names":["<global>","useTerrainShade","estimate","clearResult"],"mappings":"AAA;+BCoE;mBCK;GDiE;sBEE;GFG;CDS"},"hasCjsExports":false},"type":"js/module"}]}