{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":113},"end":{"line":7,"column":69,"index":182}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,_a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),_e.getGateMode=async function(t){const e=await c();if(_(e.first_locked_attempt_at))return e.locked_attempt_count>0&&(console.log('[GateTracking] Window expired, resetting to soft gate'),await l()),'soft';if(0===e.locked_attempt_count)return'soft';return'hard'},_e.recordAttempt=async function(t){const e=await c(),a=(new Date).toISOString();if(_(e.first_locked_attempt_at))e.locked_attempt_count=1,e.first_locked_attempt_at=a,e.last_locked_attempt_at=a,e.attempts=[{feature:t,timestamp:a}];else{e.locked_attempt_count+=1,e.first_locked_attempt_at||(e.first_locked_attempt_at=a),e.last_locked_attempt_at=a,e.attempts.push({feature:t,timestamp:a});const o=new Date(Date.now()-2592e6).toISOString();e.attempts=e.attempts.filter(t=>t.timestamp>o)}await s(e),console.log('[GateTracking] Recorded attempt:',{feature:t,count:e.locked_attempt_count,firstAt:e.first_locked_attempt_at})},_e.resetTracking=l,_e.getTrackingStats=async function(){return c()};var t,e=r(d[0]),a=(t=e)&&t.__esModule?t:{default:t};const o='routecast_gate_tracking',n=7;async function c(){try{const t=await a.default.getItem(o);return t?JSON.parse(t):{locked_attempt_count:0,attempts:[]}}catch(t){return console.error('[GateTracking] Failed to load:',t),{locked_attempt_count:0,attempts:[]}}}async function s(t){try{const e=JSON.stringify(t);await a.default.setItem(o,e)}catch(t){console.error('[GateTracking] Failed to save:',t)}}function _(t){if(!t)return!0;const e=new Date(t);return((new Date).getTime()-e.getTime())/864e5>n}async function l(){try{await a.default.removeItem(o),console.log('[GateTracking] Reset tracking')}catch(t){console.error('[GateTracking] Failed to reset:',t)}}});","lineCount":1,"map":[[1,93,83,0,"_e"],[1,96,83,0,"getGateMode"],[1,108,83,7,"async"],[1,123,83,34,"feature"],[1,126,84,2],[1,132,84,8,"tracking"],[1,140,84,25,"loadTracking"],[1,144,87,2],[1,147,87,6,"isWindowExpired"],[1,149,87,22,"tracking"],[1,151,87,31,"first_locked_attempt_at"],[1,176,93,4],[1,183,89,8,"tracking"],[1,185,89,17,"locked_attempt_count"],[1,206,89,40],[1,210,90,6,"console"],[1,218,90,14,"log"],[1,222,90,18],[1,285,91,12,"resetTracking"],[1,290,93,11],[1,297,97,2],[1,300,97,40],[1,304,97,6,"tracking"],[1,306,97,15,"locked_attempt_count"],[1,327,98,4],[1,333,98,11],[1,340,102,2],[1,346,102,9],[1,352,103,0],[1,354,108,0,"_e"],[1,357,108,0,"recordAttempt"],[1,371,108,7,"async"],[1,386,108,36,"feature"],[1,389,109,2],[1,395,109,8,"tracking"],[1,403,109,25,"loadTracking"],[1,407,110,8,"now"],[1,410,110,14],[1,414,110,18,"Date"],[1,420,110,25,"toISOString"],[1,434,113,2],[1,437,113,6,"isWindowExpired"],[1,439,113,22,"tracking"],[1,441,113,31,"first_locked_attempt_at"],[1,466,115,4,"tracking"],[1,468,115,13,"locked_attempt_count"],[1,489,115,36],[1,491,116,4,"tracking"],[1,493,116,13,"first_locked_attempt_at"],[1,517,116,39,"now"],[1,519,117,4,"tracking"],[1,521,117,13,"last_locked_attempt_at"],[1,544,117,38,"now"],[1,546,118,4,"tracking"],[1,548,118,13,"attempts"],[1,557,118,24],[1,558,118,25],[1,559,118,27,"feature"],[1,569,118,36,"timestamp"],[1,579,118,47,"now"],[1,587,119,9],[1,588,121,4,"tracking"],[1,590,121,13,"locked_attempt_count"],[1,612,121,37],[1,614,122,9,"tracking"],[1,616,122,18,"first_locked_attempt_at"],[1,642,123,6,"tracking"],[1,644,123,15,"first_locked_attempt_at"],[1,668,123,41,"now"],[1,671,125,4,"tracking"],[1,673,125,13,"last_locked_attempt_at"],[1,696,125,38,"now"],[1,698,126,4,"tracking"],[1,700,126,13,"attempts"],[1,709,126,22,"push"],[1,714,126,27],[1,715,126,29,"feature"],[1,725,126,38,"timestamp"],[1,735,126,49,"now"],[1,739,129,4],[1,745,129,10,"thirtyDaysAgo"],[1,747,129,26],[1,751,129,30,"Date"],[1,756,129,35,"Date"],[1,761,129,40,"now"],[1,767,129,45],[1,775,129,74,"toISOString"],[1,789,130,4,"tracking"],[1,791,130,13,"attempts"],[1,800,130,24,"tracking"],[1,802,130,33,"attempts"],[1,811,130,42,"filter"],[1,818,130,49,"a"],[1,821,130,54,"a"],[1,823,130,56,"timestamp"],[1,833,130,68,"thirtyDaysAgo"],[1,835,131,2],[1,842,133,8,"saveTracking"],[1,844,133,21,"tracking"],[1,847,135,2,"console"],[1,855,135,10,"log"],[1,859,135,14],[1,894,135,50],[1,895,136,4,"feature"],[1,905,137,4,"count"],[1,911,137,11,"tracking"],[1,913,137,20,"locked_attempt_count"],[1,934,138,4,"firstAt"],[1,942,138,13,"tracking"],[1,944,138,22,"first_locked_attempt_at"],[1,969,140,0],[1,971,145,0,"_e"],[1,974,145,0,"resetTracking"],[1,990,157,0,"_e"],[1,993,157,0,"getTrackingStats"],[1,1010,157,7,"async"],[1,1027,158,2],[1,1034,158,9,"loadTracking"],[1,1037,159,0],[1,1039,7,0],[1,1043],[1,1045,7,0,"_reactNativeAsyncStorageAsyncStorage"],[1,1047,7,0,"r"],[1,1049,7,0,"d"],[1,1051,7,0],[1,1055,7,0,"AsyncStorage"],[1,1058],[1,1060,7,0,"_reactNativeAsyncStorageAsyncStorage"],[1,1064],[1,1091,10,0],[1,1097,10,6,"GATE_TRACKING_KEY"],[1,1099,10,26],[1,1125,11,6,"GATE_WINDOW_DAYS"],[1,1127,11,25],[1,1129,30,0,"async"],[1,1144,30,15,"loadTracking"],[1,1148,31,2],[1,1152,32,4],[1,1158,32,10,"json"],[1,1166,32,23,"AsyncStorage"],[1,1168,32,35,"default"],[1,1176,32,36,"getItem"],[1,1184,32,44,"GATE_TRACKING_KEY"],[1,1187,33,4],[1,1194,33,9,"json"],[1,1196,39,11,"JSON"],[1,1201,39,16,"parse"],[1,1207,39,22,"json"],[1,1210,34,13],[1,1211,35,8,"locked_attempt_count"],[1,1232,35,30],[1,1234,36,8,"attempts"],[1,1243,36,18],[1,1246,40,2],[1,1247,40,4],[1,1253,40,11,"error"],[1,1256,42,4],[1,1263,41,4,"console"],[1,1271,41,12,"error"],[1,1277,41,18],[1,1310,41,52,"error"],[1,1313,42,11],[1,1314,43,6,"locked_attempt_count"],[1,1335,43,28],[1,1337,44,6,"attempts"],[1,1346,44,16],[1,1349,46,2],[1,1350,47,0],[1,1351,52,0,"async"],[1,1366,52,15,"saveTracking"],[1,1368,52,28,"tracking"],[1,1371,53,2],[1,1375,54,4],[1,1381,54,10,"json"],[1,1383,54,17,"JSON"],[1,1388,54,22,"stringify"],[1,1398,54,32,"tracking"],[1,1407,55,10,"AsyncStorage"],[1,1409,55,22,"default"],[1,1417,55,23,"setItem"],[1,1425,55,31,"GATE_TRACKING_KEY"],[1,1427,55,50,"json"],[1,1429,56,2],[1,1430,56,4],[1,1436,56,11,"error"],[1,1439,57,4,"console"],[1,1447,57,12,"error"],[1,1453,57,18],[1,1486,57,52,"error"],[1,1488,58,2],[1,1489,59,0],[1,1490,64,0],[1,1499,64,9,"isWindowExpired"],[1,1501,64,25,"firstAttemptAt"],[1,1504,65,2],[1,1508,65,7,"firstAttemptAt"],[1,1510,66,4],[1,1517,66,11],[1,1519,69,2],[1,1525,69,8,"firstAttempt"],[1,1527,69,23],[1,1531,69,27,"Date"],[1,1536,69,32,"firstAttemptAt"],[1,1539,73,2],[1,1547,70,14],[1,1551,70,18,"Date"],[1,1557,71,30,"getTime"],[1,1567,71,42,"firstAttempt"],[1,1569,71,55,"getTime"],[1,1580,71,64],[1,1586,73,26,"GATE_WINDOW_DAYS"],[1,1587,74,0],[1,1588,145,7,"async"],[1,1603,145,22,"resetTracking"],[1,1607,146,2],[1,1617,147,10,"AsyncStorage"],[1,1619,147,22,"default"],[1,1627,147,23,"removeItem"],[1,1638,147,34,"GATE_TRACKING_KEY"],[1,1641,148,4,"console"],[1,1649,148,12,"log"],[1,1653,148,16],[1,1685,149,2],[1,1686,149,4],[1,1692,149,11,"error"],[1,1695,150,4,"console"],[1,1703,150,12,"error"],[1,1709,150,18],[1,1743,150,53,"error"],[1,1745,151,2],[1,1746,152,0],[1,1747,159,1],[1,1750]],"functionMap":{"names":["<global>","loadTracking","saveTracking","isWindowExpired","getGateMode","recordAttempt","tracking.attempts.filter$argument_0","resetTracking","getTrackingStats"],"mappings":"AAA;AC6B;CDiB;AEK;CFO;AGK;CHU;OIS;CJoB;OKK;iDCsB,gCD;CLU;OOK;CPO;OQK;CRE"},"hasCjsExports":false},"type":"js/module"}]}