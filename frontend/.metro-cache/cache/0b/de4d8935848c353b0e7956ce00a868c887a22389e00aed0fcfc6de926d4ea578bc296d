{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":69,"index":96}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"BillingService\", {\n    enumerable: true,\n    get: function () {\n      return BillingService;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _axios = require(_dependencyMap[1]);\n  var axios = _interopDefault(_axios);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2]);\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var API_BASE = \"http://localhost:8000\";\n  var BillingService = {\n    /**\n     * Initialize Google Play Billing (stubbed - awaiting real implementation)\n     * Currently returns success to allow app to function\n     */\n    initializeBilling() {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          console.log('[BILLING] Initializing Google Play Billing (STUB)');\n\n          // TODO: Replace with real Google Play Billing Library integration\n          // For now, just validate backend connectivity\n          try {\n            var response = yield axios.default.get(`${API_BASE}/api/health`, {\n              timeout: 5000\n            });\n            console.log('[BILLING] Backend available, billing ready');\n            return true;\n          } catch (err) {\n            console.log('[BILLING] Backend unavailable, operating in offline mode');\n            return true; // Still return true to allow app to function\n          }\n        } catch (err) {\n          console.error('[BILLING] Initialization error (non-fatal):', err);\n          return true; // Graceful fallback\n        }\n      })();\n    },\n    /**\n     * Get available products from Google Play Store\n     * Currently returns test/placeholder product IDs\n     */\n    getAvailableProducts() {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          console.log('[BILLING] Fetching available products (STUB)');\n\n          // TODO: Replace with real Google Play getProductDetails()\n          // Using test/placeholder SKUs for now\n          return [{\n            id: 'routecast_pro_monthly',\n            name: 'Routecast Pro - Monthly',\n            price: '$4.99',\n            priceMicros: 4990000,\n            currencyCode: 'USD'\n          }, {\n            id: 'routecast_pro_annual',\n            name: 'Routecast Pro - Annual',\n            price: '$29.99',\n            priceMicros: 29990000,\n            currencyCode: 'USD'\n          }];\n        } catch (err) {\n          console.error('[BILLING] Error fetching products:', err);\n          return [];\n        }\n      })();\n    },\n    /**\n     * Initiate purchase flow with Google Play\n     * Currently stubs the purchase and returns success\n     */\n    purchase(subscriptionId) {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          console.log(`[BILLING] Starting purchase for: ${subscriptionId}`);\n\n          // TODO: Replace with real Google Play launchBillingFlow()\n          // For now, simulate a successful purchase\n\n          // In production:\n          // 1. Call Google Play launchBillingFlow()\n          // 2. Handle purchase result\n          // 3. Validate purchase with backend\n          // 4. Enable premium features\n\n          console.log('[BILLING] Purchase flow started (STUB - test mode)');\n\n          // Simulate successful purchase after 2 seconds\n          yield new Promise(resolve => setTimeout(resolve, 2000));\n\n          // Save to local storage (in real app, backend would verify)\n          yield AsyncStorage.default.setItem('routecast_premium_status', 'active');\n          yield AsyncStorage.default.setItem('routecast_subscription_id', subscriptionId);\n          console.log('[BILLING] Purchase successful (STUB)');\n          return true;\n        } catch (err) {\n          console.error('[BILLING] Purchase error:', err);\n          return false;\n        }\n      })();\n    },\n    /**\n     * Get current active subscription\n     */\n    getActiveSubscription() {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          console.log('[BILLING] Checking active subscription');\n          var subId = yield AsyncStorage.default.getItem('routecast_subscription_id');\n          var premiumStatus = yield AsyncStorage.default.getItem('routecast_premium_status');\n          if (subId && premiumStatus === 'active') {\n            console.log('[BILLING] Active subscription found:', subId);\n            return {\n              subscriptionId: subId,\n              purchaseToken: 'stub_token',\n              // Placeholder\n              expiryTime: Date.now() + 2592000000,\n              // 30 days from now\n              isActive: true\n            };\n          }\n          console.log('[BILLING] No active subscription');\n          return null;\n        } catch (err) {\n          console.error('[BILLING] Error checking subscription:', err);\n          return null;\n        }\n      })();\n    },\n    /**\n     * Cancel subscription\n     */\n    cancelSubscription(subscriptionId) {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          console.log(`[BILLING] Canceling subscription: ${subscriptionId}`);\n\n          // TODO: Call Google Play cancelSubscription()\n\n          yield AsyncStorage.default.removeItem('routecast_premium_status');\n          yield AsyncStorage.default.removeItem('routecast_subscription_id');\n          console.log('[BILLING] Subscription canceled');\n          return true;\n        } catch (err) {\n          console.error('[BILLING] Error canceling subscription:', err);\n          return false;\n        }\n      })();\n    },\n    /**\n     * Restore previous purchases (on app start or after login)\n     */\n    restorePurchases() {\n      return (0, _asyncToGenerator.default)(function* () {\n        try {\n          console.log('[BILLING] Restoring purchases');\n\n          // TODO: Call Google Play queryPurchasesAsync()\n          // For now, just check local storage\n\n          var premiumStatus = yield AsyncStorage.default.getItem('routecast_premium_status');\n          if (premiumStatus === 'active') {\n            console.log('[BILLING] Previous purchase restored');\n            return true;\n          }\n          console.log('[BILLING] No previous purchases found');\n          return false;\n        } catch (err) {\n          console.error('[BILLING] Error restoring purchases:', err);\n          return false;\n        }\n      })();\n    }\n  };\n});","lineCount":190,"map":[[12,2,21,0,"Object"],[12,8,21,0],[12,9,21,0,"defineProperty"],[12,23,21,0],[12,24,21,0,"exports"],[12,31,21,0],[13,4,21,0,"enumerable"],[13,14,21,0],[14,4,21,0,"get"],[14,7,21,0],[14,18,21,0,"get"],[14,19,21,0],[15,6,21,0],[15,13,21,0,"BillingService"],[15,27,21,0],[16,4,21,0],[17,2,21,0],[18,2,186,2],[18,6,186,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,186,2],[18,45,186,2,"require"],[18,52,186,2],[18,53,186,2,"_dependencyMap"],[18,67,186,2],[19,2,186,2],[19,6,186,2,"_asyncToGenerator"],[19,23,186,2],[19,26,186,2,"_interopDefault"],[19,41,186,2],[19,42,186,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,186,2],[20,2,1,0],[20,6,1,0,"_axios"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,0],[21,6,1,0,"axios"],[21,11,1,0],[21,14,1,0,"_interopDefault"],[21,29,1,0],[21,30,1,0,"_axios"],[21,36,1,0],[22,2,2,0],[22,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,42,2,0],[22,45,2,0,"require"],[22,52,2,0],[22,53,2,0,"_dependencyMap"],[22,67,2,0],[23,2,2,0],[23,6,2,0,"AsyncStorage"],[23,18,2,0],[23,21,2,0,"_interopDefault"],[23,36,2,0],[23,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[23,73,2,0],[24,2,4,0],[24,6,4,6,"API_BASE"],[24,14,4,14],[24,40,4,79],[25,2,21,7],[25,6,21,13,"BillingService"],[25,20,21,27],[25,23,21,30],[26,4,22,2],[27,0,23,0],[28,0,24,0],[29,0,25,0],[30,4,26,8,"initializeBilling"],[30,21,26,25,"initializeBilling"],[30,22,26,25],[30,24,26,46],[31,6,26,46],[31,17,26,46,"_asyncToGenerator"],[31,34,26,46],[31,35,26,46,"default"],[31,42,26,46],[32,8,27,4],[32,12,27,8],[33,10,28,6,"console"],[33,17,28,13],[33,18,28,14,"log"],[33,21,28,17],[33,22,28,18],[33,73,28,69],[33,74,28,70],[35,10,30,6],[36,10,31,6],[37,10,32,6],[37,14,32,10],[38,12,33,8],[38,16,33,14,"response"],[38,24,33,22],[38,33,33,31,"axios"],[38,38,33,36],[38,39,33,36,"default"],[38,46,33,36],[38,47,33,37,"get"],[38,50,33,40],[38,51,33,41],[38,54,33,44,"API_BASE"],[38,62,33,52],[38,75,33,65],[38,77,33,67],[39,14,34,10,"timeout"],[39,21,34,17],[39,23,34,19],[40,12,35,8],[40,13,35,9],[40,14,35,10],[41,12,36,8,"console"],[41,19,36,15],[41,20,36,16,"log"],[41,23,36,19],[41,24,36,20],[41,68,36,64],[41,69,36,65],[42,12,37,8],[42,19,37,15],[42,23,37,19],[43,10,38,6],[43,11,38,7],[43,12,38,8],[43,19,38,15,"err"],[43,22,38,18],[43,24,38,20],[44,12,39,8,"console"],[44,19,39,15],[44,20,39,16,"log"],[44,23,39,19],[44,24,39,20],[44,82,39,78],[44,83,39,79],[45,12,40,8],[45,19,40,15],[45,23,40,19],[45,24,40,20],[45,25,40,21],[46,10,41,6],[47,8,42,4],[47,9,42,5],[47,10,42,6],[47,17,42,13,"err"],[47,20,42,16],[47,22,42,18],[48,10,43,6,"console"],[48,17,43,13],[48,18,43,14,"error"],[48,23,43,19],[48,24,43,20],[48,69,43,65],[48,71,43,67,"err"],[48,74,43,70],[48,75,43,71],[49,10,44,6],[49,17,44,13],[49,21,44,17],[49,22,44,18],[49,23,44,19],[50,8,45,4],[51,6,45,5],[52,4,46,2],[52,5,46,3],[53,4,48,2],[54,0,49,0],[55,0,50,0],[56,0,51,0],[57,4,52,8,"getAvailableProducts"],[57,24,52,28,"getAvailableProducts"],[57,25,52,28],[57,27,52,58],[58,6,52,58],[58,17,52,58,"_asyncToGenerator"],[58,34,52,58],[58,35,52,58,"default"],[58,42,52,58],[59,8,53,4],[59,12,53,8],[60,10,54,6,"console"],[60,17,54,13],[60,18,54,14,"log"],[60,21,54,17],[60,22,54,18],[60,68,54,64],[60,69,54,65],[62,10,56,6],[63,10,57,6],[64,10,58,6],[64,17,58,13],[64,18,59,8],[65,12,60,10,"id"],[65,14,60,12],[65,16,60,14],[65,39,60,37],[66,12,61,10,"name"],[66,16,61,14],[66,18,61,16],[66,43,61,41],[67,12,62,10,"price"],[67,17,62,15],[67,19,62,17],[67,26,62,24],[68,12,63,10,"priceMicros"],[68,23,63,21],[68,25,63,23],[68,32,63,30],[69,12,64,10,"currencyCode"],[69,24,64,22],[69,26,64,24],[70,10,65,8],[70,11,65,9],[70,13,66,8],[71,12,67,10,"id"],[71,14,67,12],[71,16,67,14],[71,38,67,36],[72,12,68,10,"name"],[72,16,68,14],[72,18,68,16],[72,42,68,40],[73,12,69,10,"price"],[73,17,69,15],[73,19,69,17],[73,27,69,25],[74,12,70,10,"priceMicros"],[74,23,70,21],[74,25,70,23],[74,33,70,31],[75,12,71,10,"currencyCode"],[75,24,71,22],[75,26,71,24],[76,10,72,8],[76,11,72,9],[76,12,73,7],[77,8,74,4],[77,9,74,5],[77,10,74,6],[77,17,74,13,"err"],[77,20,74,16],[77,22,74,18],[78,10,75,6,"console"],[78,17,75,13],[78,18,75,14,"error"],[78,23,75,19],[78,24,75,20],[78,60,75,56],[78,62,75,58,"err"],[78,65,75,61],[78,66,75,62],[79,10,76,6],[79,17,76,13],[79,19,76,15],[80,8,77,4],[81,6,77,5],[82,4,78,2],[82,5,78,3],[83,4,80,2],[84,0,81,0],[85,0,82,0],[86,0,83,0],[87,4,84,8,"purchase"],[87,12,84,16,"purchase"],[87,13,84,17,"subscriptionId"],[87,27,84,39],[87,29,84,59],[88,6,84,59],[88,17,84,59,"_asyncToGenerator"],[88,34,84,59],[88,35,84,59,"default"],[88,42,84,59],[89,8,85,4],[89,12,85,8],[90,10,86,6,"console"],[90,17,86,13],[90,18,86,14,"log"],[90,21,86,17],[90,22,86,18],[90,58,86,54,"subscriptionId"],[90,72,86,68],[90,74,86,70],[90,75,86,71],[92,10,88,6],[93,10,89,6],[95,10,91,6],[96,10,92,6],[97,10,93,6],[98,10,94,6],[99,10,95,6],[101,10,97,6,"console"],[101,17,97,13],[101,18,97,14,"log"],[101,21,97,17],[101,22,97,18],[101,74,97,70],[101,75,97,71],[103,10,99,6],[104,10,100,6],[104,16,100,12],[104,20,100,16,"Promise"],[104,27,100,23],[104,28,100,24,"resolve"],[104,35,100,31],[104,39,100,35,"setTimeout"],[104,49,100,45],[104,50,100,46,"resolve"],[104,57,100,53],[104,59,100,55],[104,63,100,59],[104,64,100,60],[104,65,100,61],[106,10,102,6],[107,10,103,6],[107,16,103,12,"AsyncStorage"],[107,28,103,24],[107,29,103,24,"default"],[107,36,103,24],[107,37,103,25,"setItem"],[107,44,103,32],[107,45,103,33],[107,71,103,59],[107,73,103,61],[107,81,103,69],[107,82,103,70],[108,10,104,6],[108,16,104,12,"AsyncStorage"],[108,28,104,24],[108,29,104,24,"default"],[108,36,104,24],[108,37,104,25,"setItem"],[108,44,104,32],[108,45,104,33],[108,72,104,60],[108,74,104,62,"subscriptionId"],[108,88,104,76],[108,89,104,77],[109,10,106,6,"console"],[109,17,106,13],[109,18,106,14,"log"],[109,21,106,17],[109,22,106,18],[109,60,106,56],[109,61,106,57],[110,10,107,6],[110,17,107,13],[110,21,107,17],[111,8,108,4],[111,9,108,5],[111,10,108,6],[111,17,108,13,"err"],[111,20,108,16],[111,22,108,18],[112,10,109,6,"console"],[112,17,109,13],[112,18,109,14,"error"],[112,23,109,19],[112,24,109,20],[112,51,109,47],[112,53,109,49,"err"],[112,56,109,52],[112,57,109,53],[113,10,110,6],[113,17,110,13],[113,22,110,18],[114,8,111,4],[115,6,111,5],[116,4,112,2],[116,5,112,3],[117,4,114,2],[118,0,115,0],[119,0,116,0],[120,4,117,8,"getActiveSubscription"],[120,25,117,29,"getActiveSubscription"],[120,26,117,29],[120,28,117,62],[121,6,117,62],[121,17,117,62,"_asyncToGenerator"],[121,34,117,62],[121,35,117,62,"default"],[121,42,117,62],[122,8,118,4],[122,12,118,8],[123,10,119,6,"console"],[123,17,119,13],[123,18,119,14,"log"],[123,21,119,17],[123,22,119,18],[123,62,119,58],[123,63,119,59],[124,10,121,6],[124,14,121,12,"subId"],[124,19,121,17],[124,28,121,26,"AsyncStorage"],[124,40,121,38],[124,41,121,38,"default"],[124,48,121,38],[124,49,121,39,"getItem"],[124,56,121,46],[124,57,121,47],[124,84,121,74],[124,85,121,75],[125,10,122,6],[125,14,122,12,"premiumStatus"],[125,27,122,25],[125,36,122,34,"AsyncStorage"],[125,48,122,46],[125,49,122,46,"default"],[125,56,122,46],[125,57,122,47,"getItem"],[125,64,122,54],[125,65,122,55],[125,91,122,81],[125,92,122,82],[126,10,124,6],[126,14,124,10,"subId"],[126,19,124,15],[126,23,124,19,"premiumStatus"],[126,36,124,32],[126,41,124,37],[126,49,124,45],[126,51,124,47],[127,12,125,8,"console"],[127,19,125,15],[127,20,125,16,"log"],[127,23,125,19],[127,24,125,20],[127,62,125,58],[127,64,125,60,"subId"],[127,69,125,65],[127,70,125,66],[128,12,126,8],[128,19,126,15],[129,14,127,10,"subscriptionId"],[129,28,127,24],[129,30,127,26,"subId"],[129,35,127,31],[130,14,128,10,"purchaseToken"],[130,27,128,23],[130,29,128,25],[130,41,128,37],[131,14,128,39],[132,14,129,10,"expiryTime"],[132,24,129,20],[132,26,129,22,"Date"],[132,30,129,26],[132,31,129,27,"now"],[132,34,129,30],[132,35,129,31],[132,36,129,32],[132,49,129,59],[133,14,129,61],[134,14,130,10,"isActive"],[134,22,130,18],[134,24,130,20],[135,12,131,8],[135,13,131,9],[136,10,132,6],[137,10,134,6,"console"],[137,17,134,13],[137,18,134,14,"log"],[137,21,134,17],[137,22,134,18],[137,56,134,52],[137,57,134,53],[138,10,135,6],[138,17,135,13],[138,21,135,17],[139,8,136,4],[139,9,136,5],[139,10,136,6],[139,17,136,13,"err"],[139,20,136,16],[139,22,136,18],[140,10,137,6,"console"],[140,17,137,13],[140,18,137,14,"error"],[140,23,137,19],[140,24,137,20],[140,64,137,60],[140,66,137,62,"err"],[140,69,137,65],[140,70,137,66],[141,10,138,6],[141,17,138,13],[141,21,138,17],[142,8,139,4],[143,6,139,5],[144,4,140,2],[144,5,140,3],[145,4,142,2],[146,0,143,0],[147,0,144,0],[148,4,145,8,"cancelSubscription"],[148,22,145,26,"cancelSubscription"],[148,23,145,27,"subscriptionId"],[148,37,145,49],[148,39,145,69],[149,6,145,69],[149,17,145,69,"_asyncToGenerator"],[149,34,145,69],[149,35,145,69,"default"],[149,42,145,69],[150,8,146,4],[150,12,146,8],[151,10,147,6,"console"],[151,17,147,13],[151,18,147,14,"log"],[151,21,147,17],[151,22,147,18],[151,59,147,55,"subscriptionId"],[151,73,147,69],[151,75,147,71],[151,76,147,72],[153,10,149,6],[155,10,151,6],[155,16,151,12,"AsyncStorage"],[155,28,151,24],[155,29,151,24,"default"],[155,36,151,24],[155,37,151,25,"removeItem"],[155,47,151,35],[155,48,151,36],[155,74,151,62],[155,75,151,63],[156,10,152,6],[156,16,152,12,"AsyncStorage"],[156,28,152,24],[156,29,152,24,"default"],[156,36,152,24],[156,37,152,25,"removeItem"],[156,47,152,35],[156,48,152,36],[156,75,152,63],[156,76,152,64],[157,10,154,6,"console"],[157,17,154,13],[157,18,154,14,"log"],[157,21,154,17],[157,22,154,18],[157,55,154,51],[157,56,154,52],[158,10,155,6],[158,17,155,13],[158,21,155,17],[159,8,156,4],[159,9,156,5],[159,10,156,6],[159,17,156,13,"err"],[159,20,156,16],[159,22,156,18],[160,10,157,6,"console"],[160,17,157,13],[160,18,157,14,"error"],[160,23,157,19],[160,24,157,20],[160,65,157,61],[160,67,157,63,"err"],[160,70,157,66],[160,71,157,67],[161,10,158,6],[161,17,158,13],[161,22,158,18],[162,8,159,4],[163,6,159,5],[164,4,160,2],[164,5,160,3],[165,4,162,2],[166,0,163,0],[167,0,164,0],[168,4,165,8,"restorePurchases"],[168,20,165,24,"restorePurchases"],[168,21,165,24],[168,23,165,45],[169,6,165,45],[169,17,165,45,"_asyncToGenerator"],[169,34,165,45],[169,35,165,45,"default"],[169,42,165,45],[170,8,166,4],[170,12,166,8],[171,10,167,6,"console"],[171,17,167,13],[171,18,167,14,"log"],[171,21,167,17],[171,22,167,18],[171,53,167,49],[171,54,167,50],[173,10,169,6],[174,10,170,6],[176,10,172,6],[176,14,172,12,"premiumStatus"],[176,27,172,25],[176,36,172,34,"AsyncStorage"],[176,48,172,46],[176,49,172,46,"default"],[176,56,172,46],[176,57,172,47,"getItem"],[176,64,172,54],[176,65,172,55],[176,91,172,81],[176,92,172,82],[177,10,174,6],[177,14,174,10,"premiumStatus"],[177,27,174,23],[177,32,174,28],[177,40,174,36],[177,42,174,38],[178,12,175,8,"console"],[178,19,175,15],[178,20,175,16,"log"],[178,23,175,19],[178,24,175,20],[178,62,175,58],[178,63,175,59],[179,12,176,8],[179,19,176,15],[179,23,176,19],[180,10,177,6],[181,10,179,6,"console"],[181,17,179,13],[181,18,179,14,"log"],[181,21,179,17],[181,22,179,18],[181,61,179,57],[181,62,179,58],[182,10,180,6],[182,17,180,13],[182,22,180,18],[183,8,181,4],[183,9,181,5],[183,10,181,6],[183,17,181,13,"err"],[183,20,181,16],[183,22,181,18],[184,10,182,6,"console"],[184,17,182,13],[184,18,182,14,"error"],[184,23,182,19],[184,24,182,20],[184,62,182,58],[184,64,182,60,"err"],[184,67,182,63],[184,68,182,64],[185,10,183,6],[185,17,183,13],[185,22,183,18],[186,8,184,4],[187,6,184,5],[188,4,185,2],[189,2,186,0],[189,3,186,1],[190,0,186,2],[190,3]],"functionMap":{"names":["<global>","initializeBilling","getAvailableProducts","purchase","Promise$argument_0","getActiveSubscription","cancelSubscription","restorePurchases"],"mappings":"AAA;ECyB;GDoB;EEM;GF0B;EGM;wBCgB,oCD;GHY;EKK;GLuB;EMK;GNe;EOK;GPoB"},"hasCjsExports":false},"type":"js/module"}]}