{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":196},"end":{"line":8,"column":33,"index":229}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":230},"end":{"line":9,"column":69,"index":299}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  /**\n   * useWaterBudget - React Hook for Water Budget Estimation\n   *\n   * Custom hook for calling the water budget API endpoint and managing state.\n   * Follows the same pattern as usePropaneUsage.\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useWaterBudget\", {\n    enumerable: true,\n    get: function () {\n      return useWaterBudget;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoVirtualEnv = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[3], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[4], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var API_BASE = _expoVirtualEnv.env.EXPO_PUBLIC_API_BASE || 'http://localhost:8000';\n\n  // Type-safe interfaces matching API models\n\n  /**\n   * Hook for water budget estimation\n   *\n   * Usage:\n   * ```typescript\n   * const { estimate, loading, error, result } = useWaterBudget();\n   *\n   * await estimate({\n   *   fresh_gal: 40,\n   *   gray_gal: 50,\n   *   black_gal: 20,\n   *   people: 2,\n   *   showers_per_week: 2,\n   *   hot_days: false,\n   * });\n   *\n   * if (result?.is_premium_locked) {\n   *   // Show paywall modal\n   * } else if (result?.days_remaining !== undefined) {\n   *   // Display results\n   * }\n   * ```\n   */\n  var useWaterBudget = () => {\n    _s();\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n    var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n    var _useState5 = (0, _react.useState)(null),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      result = _useState6[0],\n      setResult = _useState6[1];\n    var estimate = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (request) {\n        setLoading(true);\n        setError(null);\n        try {\n          // Retrieve subscription ID from AsyncStorage if not provided\n          var subscriptionId = request.subscription_id;\n          if (!subscriptionId) {\n            try {\n              subscriptionId = yield AsyncStorage.default.getItem('subscription_id');\n            } catch (e) {\n              console.log('Could not retrieve subscription ID from storage');\n            }\n          }\n\n          // Call API endpoint\n          var response = yield fetch(`${API_BASE}/api/pro/water-budget`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              ...request,\n              subscription_id: subscriptionId\n            })\n          });\n          if (!response.ok) {\n            // Try to parse error detail from response\n            var errorDetail = `HTTP ${response.status}`;\n            try {\n              var errorData = yield response.json();\n              if (errorData.detail) {\n                errorDetail = errorData.detail;\n              }\n            } catch {\n              // If response isn't JSON, use status message\n              errorDetail = response.statusText || `HTTP ${response.status}`;\n            }\n            throw new Error(errorDetail);\n          }\n          var data = yield response.json();\n\n          // Detect premium-locked response\n          if (data.is_premium_locked && data.premium_message) {\n            setError(data.premium_message);\n            setResult(data);\n            setLoading(false);\n            return data;\n          }\n\n          // Success\n          setResult(data);\n          setLoading(false);\n          return data;\n        } catch (err) {\n          var errorMessage = err instanceof Error ? err.message : 'Unknown error';\n          console.error('Error in useWaterBudget:', errorMessage);\n          setError(errorMessage);\n          setLoading(false);\n          return null;\n        }\n      });\n      return function estimate(_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var clearResult = () => {\n      setResult(null);\n      setError(null);\n    };\n    return {\n      estimate,\n      loading,\n      error,\n      result,\n      clearResult\n    };\n  };\n  _s(useWaterBudget, \"0rJtg/E9+fiowe8eKNooMN/xlkg=\");\n});","lineCount":153,"map":[[5,2,1,0],[6,0,2,0],[7,0,3,0],[8,0,4,0],[9,0,5,0],[10,0,6,0],[11,2,1,0,"Object"],[11,8,1,0],[11,9,1,0,"defineProperty"],[11,23,1,0],[11,24,1,0,"exports"],[11,31,1,0],[12,4,1,0,"value"],[12,9,1,0],[13,2,1,0],[14,2,1,0],[14,11,1,0,"_interopDefault"],[14,27,1,0,"e"],[14,28,1,0],[15,4,1,0],[15,11,1,0,"e"],[15,12,1,0],[15,16,1,0,"e"],[15,17,1,0],[15,18,1,0,"__esModule"],[15,28,1,0],[15,31,1,0,"e"],[15,32,1,0],[16,6,1,0,"default"],[16,13,1,0],[16,15,1,0,"e"],[17,4,1,0],[18,2,1,0],[19,2,67,0,"Object"],[19,8,67,0],[19,9,67,0,"defineProperty"],[19,23,67,0],[19,24,67,0,"exports"],[19,31,67,0],[20,4,67,0,"enumerable"],[20,14,67,0],[21,4,67,0,"get"],[21,7,67,0],[21,18,67,0,"get"],[21,19,67,0],[22,6,67,0],[22,13,67,0,"useWaterBudget"],[22,27,67,0],[23,4,67,0],[24,2,67,0],[25,2,151,2],[25,6,151,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,42,151,2],[25,45,151,2,"require"],[25,52,151,2],[25,53,151,2,"_dependencyMap"],[25,67,151,2],[26,2,151,2],[26,6,151,2,"_asyncToGenerator"],[26,23,151,2],[26,26,151,2,"_interopDefault"],[26,41,151,2],[26,42,151,2,"_babelRuntimeHelpersAsyncToGenerator"],[26,78,151,2],[27,2,151,2],[27,6,151,2,"_babelRuntimeHelpersSlicedToArray"],[27,39,151,2],[27,42,151,2,"require"],[27,49,151,2],[27,50,151,2,"_dependencyMap"],[27,64,151,2],[28,2,151,2],[28,6,151,2,"_slicedToArray"],[28,20,151,2],[28,23,151,2,"_interopDefault"],[28,38,151,2],[28,39,151,2,"_babelRuntimeHelpersSlicedToArray"],[28,72,151,2],[29,2,151,2],[29,6,151,2,"_expoVirtualEnv"],[29,21,151,2],[29,24,151,2,"require"],[29,31,151,2],[29,32,151,2,"_dependencyMap"],[29,46,151,2],[30,2,8,0],[30,6,8,0,"_react"],[30,12,8,0],[30,15,8,0,"require"],[30,22,8,0],[30,23,8,0,"_dependencyMap"],[30,37,8,0],[31,2,9,0],[31,6,9,0,"_reactNativeAsyncStorageAsyncStorage"],[31,42,9,0],[31,45,9,0,"require"],[31,52,9,0],[31,53,9,0,"_dependencyMap"],[31,67,9,0],[32,2,9,0],[32,6,9,0,"AsyncStorage"],[32,18,9,0],[32,21,9,0,"_interopDefault"],[32,36,9,0],[32,37,9,0,"_reactNativeAsyncStorageAsyncStorage"],[32,73,9,0],[33,2,11,0],[33,6,11,6,"API_BASE"],[33,14,11,14],[33,17,11,17,"_expoVirtualEnv"],[33,32,11,17],[33,33,11,17,"env"],[33,36,11,17],[33,37,11,17,"EXPO_PUBLIC_API_BASE"],[33,57,11,17],[33,61,11,53],[33,84,11,76],[35,2,13,0],[37,2,44,0],[38,0,45,0],[39,0,46,0],[40,0,47,0],[41,0,48,0],[42,0,49,0],[43,0,50,0],[44,0,51,0],[45,0,52,0],[46,0,53,0],[47,0,54,0],[48,0,55,0],[49,0,56,0],[50,0,57,0],[51,0,58,0],[52,0,59,0],[53,0,60,0],[54,0,61,0],[55,0,62,0],[56,0,63,0],[57,0,64,0],[58,0,65,0],[59,0,66,0],[60,2,67,7],[60,6,67,13,"useWaterBudget"],[60,20,67,27],[60,23,67,30,"useWaterBudget"],[60,24,67,30],[60,29,67,58],[61,4,67,58,"_s"],[61,6,67,58],[62,4,68,2],[62,8,68,2,"_useState"],[62,17,68,2],[62,20,68,32],[62,24,68,32,"useState"],[62,30,68,40],[62,31,68,40,"useState"],[62,39,68,40],[62,41,68,41],[62,46,68,46],[62,47,68,47],[63,6,68,47,"_useState2"],[63,16,68,47],[63,23,68,47,"_slicedToArray"],[63,37,68,47],[63,38,68,47,"default"],[63,45,68,47],[63,47,68,47,"_useState"],[63,56,68,47],[64,6,68,9,"loading"],[64,13,68,16],[64,16,68,16,"_useState2"],[64,26,68,16],[65,6,68,18,"setLoading"],[65,16,68,28],[65,19,68,28,"_useState2"],[65,29,68,28],[66,4,69,2],[66,8,69,2,"_useState3"],[66,18,69,2],[66,21,69,28],[66,25,69,28,"useState"],[66,31,69,36],[66,32,69,36,"useState"],[66,40,69,36],[66,42,69,52],[66,46,69,56],[66,47,69,57],[67,6,69,57,"_useState4"],[67,16,69,57],[67,23,69,57,"_slicedToArray"],[67,37,69,57],[67,38,69,57,"default"],[67,45,69,57],[67,47,69,57,"_useState3"],[67,57,69,57],[68,6,69,9,"error"],[68,11,69,14],[68,14,69,14,"_useState4"],[68,24,69,14],[69,6,69,16,"setError"],[69,14,69,24],[69,17,69,24,"_useState4"],[69,27,69,24],[70,4,70,2],[70,8,70,2,"_useState5"],[70,18,70,2],[70,21,70,30],[70,25,70,30,"useState"],[70,31,70,38],[70,32,70,38,"useState"],[70,40,70,38],[70,42,70,67],[70,46,70,71],[70,47,70,72],[71,6,70,72,"_useState6"],[71,16,70,72],[71,23,70,72,"_slicedToArray"],[71,37,70,72],[71,38,70,72,"default"],[71,45,70,72],[71,47,70,72,"_useState5"],[71,57,70,72],[72,6,70,9,"result"],[72,12,70,15],[72,15,70,15,"_useState6"],[72,25,70,15],[73,6,70,17,"setResult"],[73,15,70,26],[73,18,70,26,"_useState6"],[73,28,70,26],[74,4,72,2],[74,8,72,8,"estimate"],[74,16,72,16],[75,6,72,16],[75,10,72,16,"_ref"],[75,14,72,16],[75,21,72,16,"_asyncToGenerator"],[75,38,72,16],[75,39,72,16,"default"],[75,46,72,16],[75,48,72,19],[75,59,73,4,"request"],[75,66,73,31],[75,68,74,44],[76,8,75,4,"setLoading"],[76,18,75,14],[76,19,75,15],[76,23,75,19],[76,24,75,20],[77,8,76,4,"setError"],[77,16,76,12],[77,17,76,13],[77,21,76,17],[77,22,76,18],[78,8,78,4],[78,12,78,8],[79,10,79,6],[80,10,80,6],[80,14,80,10,"subscriptionId"],[80,28,80,24],[80,31,80,27,"request"],[80,38,80,34],[80,39,80,35,"subscription_id"],[80,54,80,50],[81,10,81,6],[81,14,81,10],[81,15,81,11,"subscriptionId"],[81,29,81,25],[81,31,81,27],[82,12,82,8],[82,16,82,12],[83,14,83,10,"subscriptionId"],[83,28,83,24],[83,37,83,33,"AsyncStorage"],[83,49,83,45],[83,50,83,45,"default"],[83,57,83,45],[83,58,83,46,"getItem"],[83,65,83,53],[83,66,83,54],[83,83,83,71],[83,84,83,72],[84,12,84,8],[84,13,84,9],[84,14,84,10],[84,21,84,17,"e"],[84,22,84,18],[84,24,84,20],[85,14,85,10,"console"],[85,21,85,17],[85,22,85,18,"log"],[85,25,85,21],[85,26,85,22],[85,75,85,71],[85,76,85,72],[86,12,86,8],[87,10,87,6],[89,10,89,6],[90,10,90,6],[90,14,90,12,"response"],[90,22,90,20],[90,31,90,29,"fetch"],[90,36,90,34],[90,37,90,35],[90,40,90,38,"API_BASE"],[90,48,90,46],[90,71,90,69],[90,73,90,71],[91,12,91,8,"method"],[91,18,91,14],[91,20,91,16],[91,26,91,22],[92,12,92,8,"headers"],[92,19,92,15],[92,21,92,17],[93,14,93,10],[93,28,93,24],[93,30,93,26],[94,12,94,8],[94,13,94,9],[95,12,95,8,"body"],[95,16,95,12],[95,18,95,14,"JSON"],[95,22,95,18],[95,23,95,19,"stringify"],[95,32,95,28],[95,33,95,29],[96,14,96,10],[96,17,96,13,"request"],[96,24,96,20],[97,14,97,10,"subscription_id"],[97,29,97,25],[97,31,97,27,"subscriptionId"],[98,12,98,8],[98,13,98,9],[99,10,99,6],[99,11,99,7],[99,12,99,8],[100,10,101,6],[100,14,101,10],[100,15,101,11,"response"],[100,23,101,19],[100,24,101,20,"ok"],[100,26,101,22],[100,28,101,24],[101,12,102,8],[102,12,103,8],[102,16,103,12,"errorDetail"],[102,27,103,23],[102,30,103,26],[102,38,103,34,"response"],[102,46,103,42],[102,47,103,43,"status"],[102,53,103,49],[102,55,103,51],[103,12,104,8],[103,16,104,12],[104,14,105,10],[104,18,105,16,"errorData"],[104,27,105,25],[104,36,105,34,"response"],[104,44,105,42],[104,45,105,43,"json"],[104,49,105,47],[104,50,105,48],[104,51,105,49],[105,14,106,10],[105,18,106,14,"errorData"],[105,27,106,23],[105,28,106,24,"detail"],[105,34,106,30],[105,36,106,32],[106,16,107,12,"errorDetail"],[106,27,107,23],[106,30,107,26,"errorData"],[106,39,107,35],[106,40,107,36,"detail"],[106,46,107,42],[107,14,108,10],[108,12,109,8],[108,13,109,9],[108,14,109,10],[108,20,109,16],[109,14,110,10],[110,14,111,10,"errorDetail"],[110,25,111,21],[110,28,111,24,"response"],[110,36,111,32],[110,37,111,33,"statusText"],[110,47,111,43],[110,51,111,47],[110,59,111,55,"response"],[110,67,111,63],[110,68,111,64,"status"],[110,74,111,70],[110,76,111,72],[111,12,112,8],[112,12,113,8],[112,18,113,14],[112,22,113,18,"Error"],[112,27,113,23],[112,28,113,24,"errorDetail"],[112,39,113,35],[112,40,113,36],[113,10,114,6],[114,10,116,6],[114,14,116,12,"data"],[114,18,116,37],[114,27,116,46,"response"],[114,35,116,54],[114,36,116,55,"json"],[114,40,116,59],[114,41,116,60],[114,42,116,61],[116,10,118,6],[117,10,119,6],[117,14,119,10,"data"],[117,18,119,14],[117,19,119,15,"is_premium_locked"],[117,36,119,32],[117,40,119,36,"data"],[117,44,119,40],[117,45,119,41,"premium_message"],[117,60,119,56],[117,62,119,58],[118,12,120,8,"setError"],[118,20,120,16],[118,21,120,17,"data"],[118,25,120,21],[118,26,120,22,"premium_message"],[118,41,120,37],[118,42,120,38],[119,12,121,8,"setResult"],[119,21,121,17],[119,22,121,18,"data"],[119,26,121,22],[119,27,121,23],[120,12,122,8,"setLoading"],[120,22,122,18],[120,23,122,19],[120,28,122,24],[120,29,122,25],[121,12,123,8],[121,19,123,15,"data"],[121,23,123,19],[122,10,124,6],[124,10,126,6],[125,10,127,6,"setResult"],[125,19,127,15],[125,20,127,16,"data"],[125,24,127,20],[125,25,127,21],[126,10,128,6,"setLoading"],[126,20,128,16],[126,21,128,17],[126,26,128,22],[126,27,128,23],[127,10,129,6],[127,17,129,13,"data"],[127,21,129,17],[128,8,130,4],[128,9,130,5],[128,10,130,6],[128,17,130,13,"err"],[128,20,130,16],[128,22,130,18],[129,10,131,6],[129,14,131,12,"errorMessage"],[129,26,131,24],[129,29,131,27,"err"],[129,32,131,30],[129,44,131,42,"Error"],[129,49,131,47],[129,52,131,50,"err"],[129,55,131,53],[129,56,131,54,"message"],[129,63,131,61],[129,66,131,64],[129,81,131,79],[130,10,132,6,"console"],[130,17,132,13],[130,18,132,14,"error"],[130,23,132,19],[130,24,132,20],[130,50,132,46],[130,52,132,48,"errorMessage"],[130,64,132,60],[130,65,132,61],[131,10,133,6,"setError"],[131,18,133,14],[131,19,133,15,"errorMessage"],[131,31,133,27],[131,32,133,28],[132,10,134,6,"setLoading"],[132,20,134,16],[132,21,134,17],[132,26,134,22],[132,27,134,23],[133,10,135,6],[133,17,135,13],[133,21,135,17],[134,8,136,4],[135,6,137,2],[135,7,137,3],[136,6,137,3],[136,22,72,8,"estimate"],[136,30,72,16,"estimate"],[136,31,72,16,"_x"],[136,33,72,16],[137,8,72,16],[137,15,72,16,"_ref"],[137,19,72,16],[137,20,72,16,"apply"],[137,25,72,16],[137,32,72,16,"arguments"],[137,41,72,16],[138,6,72,16],[139,4,72,16],[139,7,137,3],[140,4,139,2],[140,8,139,8,"clearResult"],[140,19,139,19],[140,22,139,22,"clearResult"],[140,23,139,22],[140,28,139,28],[141,6,140,4,"setResult"],[141,15,140,13],[141,16,140,14],[141,20,140,18],[141,21,140,19],[142,6,141,4,"setError"],[142,14,141,12],[142,15,141,13],[142,19,141,17],[142,20,141,18],[143,4,142,2],[143,5,142,3],[144,4,144,2],[144,11,144,9],[145,6,145,4,"estimate"],[145,14,145,12],[146,6,146,4,"loading"],[146,13,146,11],[147,6,147,4,"error"],[147,11,147,9],[148,6,148,4,"result"],[148,12,148,10],[149,6,149,4,"clearResult"],[150,4,150,2],[150,5,150,3],[151,2,151,0],[151,3,151,1],[152,2,151,2,"_s"],[152,4,151,2],[152,5,67,13,"useWaterBudget"],[152,19,67,27],[153,0,67,27],[153,3]],"functionMap":{"names":["<global>","useWaterBudget","estimate","clearResult"],"mappings":"AAA;8BCkE;mBCK;GDiE;sBEE;GFG;CDS"},"hasCjsExports":false},"type":"js/module"}]}