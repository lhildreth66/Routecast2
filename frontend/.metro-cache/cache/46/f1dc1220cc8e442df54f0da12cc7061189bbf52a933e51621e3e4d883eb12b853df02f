{"dependencies":[{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":142},"end":{"line":8,"column":49,"index":191}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"EntitlementsCache\",{enumerable:!0,get:function(){return n}}),Object.defineProperty(_e,\"entitlementsCache\",{enumerable:!0,get:function(){return o}});var e=(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t})(r(_d[0]));const t='routecast_entitlements_v1';class n{async save(n){try{const o=JSON.stringify(n);await e.setItemAsync(t,o),console.log('[EntitlementsCache] Saved:',n)}catch(e){throw console.error('[EntitlementsCache] Failed to save:',e),e}}async load(){try{const n=await e.getItemAsync(t);if(!n)return console.log('[EntitlementsCache] No cached entitlement found'),null;const o=JSON.parse(n);return console.log('[EntitlementsCache] Loaded:',o),o}catch(e){return console.error('[EntitlementsCache] Failed to load:',e),null}}async clear(){try{await e.deleteItemAsync(t),console.log('[EntitlementsCache] Cleared')}catch(e){console.error('[EntitlementsCache] Failed to clear:',e)}}isValid(e){if(!e)return!1;if(!e.isPro)return!1;if(!e.expireAt)return e.isPro;const t=new Date,n=new Date(e.expireAt)>t;return console.log('[EntitlementsCache] Validity check:',{isPro:e.isPro,expireAt:e.expireAt,now:t.toISOString(),isNotExpired:n}),n}toEntitlement(e){return{isPro:this.isValid(e),productId:e.productId,expireAt:e.expireAt,source:'cache'}}createLocked(){return{isPro:!1,source:'cache'}}async updateFromPurchase(e,t){const n=new Date(t),o=new Date(n);'boondocking_pro_monthly'===e?o.setMonth(o.getMonth()+1):'boondocking_pro_yearly'===e&&o.setFullYear(o.getFullYear()+1);const c={isPro:!0,productId:e,expireAt:o.toISOString(),lastVerifiedAt:(new Date).toISOString()};await this.save(c)}async updateVerificationTime(){const e=await this.load();e&&(e.lastVerifiedAt=(new Date).toISOString(),await this.save(e))}}const o=new n});","lineCount":1,"map":[[1,93,13,0,"Object"],[1,100,13,0,"defineProperty"],[1,115,13,0,"_e"],[1,118,13,0],[1,139,13,0,"enumerable"],[1,151,13,0],[1,153,13,0,"get"],[1,157,13,0],[1,175,13,0,"EntitlementsCache"],[1,176,13,0],[1,180,159,0,"Object"],[1,187,159,0,"defineProperty"],[1,202,159,0,"_e"],[1,205,159,0],[1,226,159,0,"enumerable"],[1,238,159,0],[1,240,159,0,"get"],[1,244,159,0],[1,262,159,0,"entitlementsCache"],[1,263,159,0],[1,267,8,0],[1,271,8,0,"SecureStore"],[1,274],[1,507,8,0,"_interopNamespace"],[1,508,8,0,"r"],[1,510,8,0,"_d"],[1,513,8,0],[1,518,11,0],[1,524,11,6,"CACHE_KEY"],[1,526,11,18],[1,554,13,7],[1,560,13,13,"EntitlementsCache"],[1,562,17,2],[1,572,17,8,"save"],[1,573,17,13,"entitlement"],[1,576,18,4],[1,580,19,6],[1,586,19,12,"json"],[1,588,19,19,"JSON"],[1,593,19,24,"stringify"],[1,603,19,34,"entitlement"],[1,612,20,12,"SecureStore"],[1,614,20,24,"setItemAsync"],[1,627,20,37,"CACHE_KEY"],[1,629,20,48,"json"],[1,632,21,6,"console"],[1,640,21,14,"log"],[1,644,21,18],[1,673,21,48,"entitlement"],[1,675,22,4],[1,676,22,6],[1,682,22,13,"error"],[1,685,24,6],[1,691,23,6,"console"],[1,699,23,14,"error"],[1,705,23,20],[1,743,23,59,"error"],[1,746,24,12,"error"],[1,747,25,4],[1,748,26,2],[1,749,32,2],[1,759,32,8,"load"],[1,762,33,4],[1,766,34,6],[1,772,34,12,"json"],[1,780,34,25,"SecureStore"],[1,782,34,37,"getItemAsync"],[1,795,34,50,"CACHE_KEY"],[1,798,35,6],[1,802,35,11,"json"],[1,804,37,8],[1,811,36,8,"console"],[1,819,36,16,"log"],[1,823,36,20],[1,874,37,15],[1,879,40,6],[1,885,40,12,"cached"],[1,887,40,40,"JSON"],[1,892,40,45,"parse"],[1,898,40,51,"json"],[1,901,42,6],[1,908,41,6,"console"],[1,916,41,14,"log"],[1,920,41,18],[1,950,41,49,"cached"],[1,953,42,13,"cached"],[1,954,43,4],[1,955,43,6],[1,961,43,13,"error"],[1,964,45,6],[1,971,44,6,"console"],[1,979,44,14,"error"],[1,985,44,20],[1,1023,44,59,"error"],[1,1026,45,13],[1,1030,46,4],[1,1031,47,2],[1,1032,52,2],[1,1043,52,8,"clear"],[1,1046,53,4],[1,1056,54,12,"SecureStore"],[1,1058,54,24,"deleteItemAsync"],[1,1074,54,40,"CACHE_KEY"],[1,1077,55,6,"console"],[1,1085,55,14,"log"],[1,1089,55,18],[1,1119,56,4],[1,1120,56,6],[1,1126,56,13,"error"],[1,1129,57,6,"console"],[1,1137,57,14,"error"],[1,1143,57,20],[1,1182,57,60,"error"],[1,1184,58,4],[1,1185,59,2],[1,1186,65,2,"isValid"],[1,1194,65,10,"cached"],[1,1197,66,4],[1,1201,66,9,"cached"],[1,1203,67,6],[1,1210,67,13],[1,1212,70,4],[1,1216,70,9,"cached"],[1,1218,70,16,"isPro"],[1,1224,71,6],[1,1231,71,13],[1,1233,74,4],[1,1237,74,9,"cached"],[1,1239,74,16,"expireAt"],[1,1248,76,6],[1,1255,76,13,"cached"],[1,1257,76,20,"isPro"],[1,1263,79,4],[1,1269,79,10,"now"],[1,1271,79,16],[1,1275,79,20,"Date"],[1,1280,81,10,"isNotExpired"],[1,1282,80,19],[1,1286,80,23,"Date"],[1,1291,80,28,"cached"],[1,1293,80,35,"expireAt"],[1,1303,81,34,"now"],[1,1305,90,4],[1,1312,83,4,"console"],[1,1320,83,12,"log"],[1,1324,83,16],[1,1362,83,55],[1,1363,84,6,"isPro"],[1,1369,84,13,"cached"],[1,1371,84,20,"isPro"],[1,1377,85,6,"expireAt"],[1,1386,85,16,"cached"],[1,1388,85,23,"expireAt"],[1,1397,86,6,"now"],[1,1401,86,11,"now"],[1,1403,86,15,"toISOString"],[1,1417,87,6,"isNotExpired"],[1,1434,90,11,"isNotExpired"],[1,1435,91,2],[1,1436,96,2,"toEntitlement"],[1,1450,96,16,"cached"],[1,1453,99,4],[1,1459,99,11],[1,1460,100,6,"isPro"],[1,1466,97,20,"this"],[1,1471,97,25,"isValid"],[1,1479,97,33,"cached"],[1,1482,101,6,"productId"],[1,1492,101,17,"cached"],[1,1494,101,24,"productId"],[1,1504,102,6,"expireAt"],[1,1513,102,16,"cached"],[1,1515,102,23,"expireAt"],[1,1524,103,6,"source"],[1,1531,103,14],[1,1539,105,2],[1,1540,110,2,"createLocked"],[1,1555,111,4],[1,1561,111,11],[1,1562,112,6,"isPro"],[1,1569,112,13],[1,1571,113,6,"source"],[1,1578,113,14],[1,1586,115,2],[1,1587,121,2],[1,1611,121,8,"updateFromPurchase"],[1,1612,122,4,"productId"],[1,1614,123,4,"purchaseDate"],[1,1617,125,4],[1,1623,125,10,"purchaseDateObj"],[1,1625,125,28],[1,1629,125,32,"Date"],[1,1634,125,37,"purchaseDate"],[1,1637,128,10,"expireAt"],[1,1639,128,21],[1,1643,128,25,"Date"],[1,1648,128,30,"purchaseDateObj"],[1,1651,129,22],[1,1679,129,8,"productId"],[1,1681,130,6,"expireAt"],[1,1683,130,15,"setMonth"],[1,1692,130,24,"expireAt"],[1,1694,130,33,"getMonth"],[1,1705,130,46],[1,1708,131,29],[1,1735,131,15,"productId"],[1,1738,132,6,"expireAt"],[1,1740,132,15,"setFullYear"],[1,1752,132,27,"expireAt"],[1,1754,132,36,"getFullYear"],[1,1768,132,52],[1,1771,135,4],[1,1777,135,10,"cached"],[1,1779,135,38],[1,1780,136,6,"isPro"],[1,1787,136,13],[1,1789,137,6,"productId"],[1,1801,138,6,"expireAt"],[1,1810,138,16,"expireAt"],[1,1812,138,25,"toISOString"],[1,1826,139,6,"lastVerifiedAt"],[1,1842,139,22],[1,1846,139,26,"Date"],[1,1852,139,33,"toISOString"],[1,1873,142,10,"this"],[1,1878,142,15,"save"],[1,1883,142,20,"cached"],[1,1885,143,2],[1,1886,149,2],[1,1914,149,8,"updateVerificationTime"],[1,1917,150,4],[1,1923,150,10,"cached"],[1,1931,150,25,"this"],[1,1936,150,30,"load"],[1,1943,151,8,"cached"],[1,1947,152,6,"cached"],[1,1949,152,13,"lastVerifiedAt"],[1,1965,152,30],[1,1969,152,34,"Date"],[1,1975,152,41,"toISOString"],[1,1995,153,12,"this"],[1,2000,153,17,"save"],[1,2005,153,22,"cached"],[1,2008,155,2],[1,2010,159,7],[1,2016,159,13,"entitlementsCache"],[1,2018,159,33],[1,2022,159,37,"EntitlementsCache"],[1,2023,159,57],[1,2026]],"functionMap":{"names":["<global>","EntitlementsCache","EntitlementsCache#save","EntitlementsCache#load","EntitlementsCache#clear","EntitlementsCache#isValid","EntitlementsCache#toEntitlement","EntitlementsCache#createLocked","EntitlementsCache#updateFromPurchase","EntitlementsCache#updateVerificationTime"],"mappings":"AAA;OCY;ECI;GDS;EEM;GFe;EGK;GHO;EIM;GJ0B;EKK;GLS;EMK;GNK;EOM;GPsB;EQM;GRM;CDC"},"hasCjsExports":false},"type":"js/module"}]}